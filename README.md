# ระบบ Monitoring Server (Python + Cronjob)

โปรเจกต์นี้เป็นสคริปต์สำหรับตรวจสอบสถานะของเครื่องเซิร์ฟเวอร์แบบเบื้องต้น
โดยเก็บข้อมูลการใช้งานของระบบ เช่น CPU, RAM, Disk
พร้อมบันทึกเวลาที่ตรวจสอบ (Timestamp) และชื่อเครื่อง (Hostname)
จากนั้นนำข้อมูลเหล่านี้ไปบันทึกในไฟล์ Log เพื่อใช้ตรวจสอบย้อนหลังได้

สคริปต์ถูกออกแบบให้ทำงานอัตโนมัติทุก **5 นาที** ผ่าน Cronjob
ตามรูปแบบที่ใช้จริงในงานสาย System Admin / DevOps / Network Operations

------------------------------------------------------------------------

## ฟีเจอร์ (Phase 1)

### การตรวจสอบระบบ (System Monitoring)

-   ตรวจสอบการใช้งาน CPU
-   ตรวจสอบการใช้งาน RAM
-   ตรวจสอบการใช้งาน Disk
-   เก็บ Timestamp (รูปแบบ YYYY-MM-DD HH:MM:SS)
-   เก็บ Hostname (ชื่อเครื่อง)

### ระบบ Log

สคริปต์จะบันทึก Log ลงไฟล์ `health.log` ในรูปแบบ:

    2024-01-13 21:50:10 HOST=SERVER CPU=2.1 RAM=30 Disk=0.4
    
### Shell Script (run_monitor.sh)

ใช้สำหรับ: 
- เข้าโฟลเดอร์โปรเจกต์
- เปิดใช้งาน Virtual Environment (venv)
- รันสคริปต์ monitor.py
- ให้ cronjob เรียกใช้งานได้อย่างถูกต้อง

### Cronjob Automation

รันสคริปต์ทุก **5 นาที** อัตโนมัติ และเก็บผลลัพธ์ลง `cron.log`

------------------------------------------------------------------------

## การทำงานของระบบ (Phase 1)
1. **Cronjob** ทำการเรียกใช้งานทุก 5 นาที  
2. **run_monitor.sh** ทำหน้าที่:
   - เข้าโฟลเดอร์โปรเจกต์
   - เปิดใช้งาน Virtual Environment
   - รันสคริปต์ monitor.py  
3. **monitor.py** เก็บข้อมูล CPU, RAM, Disk, Timestamp, Hostname  
4. บันทึกผลลงไฟล์ **health.log** แบบ append  

------------------------------------------------------------------------

## โครงสร้างโปรเจกต์

    ops_project/
    │
    ├── monitor.py
    ├── run_monitor.sh
    ├── requirements.txt
    ├── .gitignore
    └── README.md

> หมายเหตุ: โฟลเดอร์ `venv/` และไฟล์ `.log` ไม่รวมใน Git

------------------------------------------------------------------------

## monitor.py ทำอะไรบ้าง?

-   อ่านข้อมูล CPU, RAM, Disk
-   อ่าน Timestamp ปัจจุบัน
-   อ่าน Hostname ของเครื่อง
-   สร้าง log line และบันทึกลงไฟล์ `health.log`

ตัวอย่าง:

    2024-01-13 21:50:10 HOST=SERVER CPU=2.1 RAM=30 Disk=0.4

------------------------------------------------------------------------

## Shell Script (run_monitor.sh)

ใช้โดย Cronjob:

``` bash
#!/bin/bash
cd /home/<your_user>/ops_project
source venv/bin/activate
python monitor.py
```

------------------------------------------------------------------------

## ตั้งค่า Cronjob (ทุก 5 นาที)

รันคำสั่ง:

    crontab -e

เพิ่มบรรทัดนี้:

    */5 * * * * cd /home/<your_user>/ops_project && ./run_monitor.sh >> cron.log 2>&1

------------------------------------------------------------------------

## การติดตั้ง (สำหรับผู้ใช้ที่ clone โปรเจกต์)

ติดตั้ง dependencies ด้วย:

    pip install -r requirements.txt

------------------------------------------------------------------------

## สิ่งที่อาจพัฒนาเพิ่มเติมในอนาคต

### Network Monitoring
- ตรวจสอบระยะเวลาตอบสนอง (Ping)
- ตรวจสอบ DNS / Port Health

### Alerting (พื้นฐาน)
- ส่ง LINE Notify แบบง่าย เมื่อ CPU/Network มีปัญหา

### Dashboard (อาจพัฒนาเพิ่มเติม เป็นส่วนเสริม)
- หน้าเว็บเล็ก ๆ แสดงค่าต่าง ๆ

------------------------------------------------------------------------
